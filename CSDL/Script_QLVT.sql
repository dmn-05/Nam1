CREATE DATABASE QUANLYVATTU
GO
USE QUANLYVATTU
GO

CREATE TABLE KHACHHANG
(
MAKH NVARCHAR(5) NOT NULL,
TENKH NVARCHAR(30) NOT NULL,
DIACHI NVARCHAR(50),
DT NVARCHAR(15),
EMAIL NVARCHAR(30),
CONSTRAINT PK_KH PRIMARY KEY(MAKH)
)

CREATE TABLE VATTU
(
MAVT NVARCHAR(5) NOT NULL,
TENVT NVARCHAR(30) NOT NULL,
DVT NVARCHAR(20),
GIAMUA INT CHECK(GIAMUA > 0),
SLTON INT CHECK(SLTON >=0),
CONSTRAINT PK_VT PRIMARY KEY(MAVT)
)

CREATE TABLE HOADON
(
MAHD NVARCHAR(10) NOT NULL,
NGAY DATETIME,
MAKH NVARCHAR(5),
TONGTG INT,
CONSTRAINT PK_HD PRIMARY KEY (MAHD),
CONSTRAINT FK_HD_KH FOREIGN KEY(MAKH) REFERENCES KHACHHANG(MAKH)
)

CREATE TABLE CHITIETHOADON
(
MAHD NVARCHAR(10) NOT NULL,
MAVT NVARCHAR(5) NOT NULL,
SL INT,
KHUYENMAI INT,
GIABAN INT,
CONSTRAINT PK_CTHD PRIMARY KEY(MAHD,MAVT),
CONSTRAINT FK_CTHD_HD FOREIGN KEY(MAHD) REFERENCES HOADON(MAHD),
CONSTRAINT FK_CTHD_VT FOREIGN KEY(MAVT) REFERENCES VATTU(MAVT)
)
INSERT INTO VATTU VALUES('VT01',N'XI MĂNG',N'BAO',50000,5000)
INSERT INTO VATTU VALUES('VT02',N'CÁT',N'KHỐI',45000,50000)
INSERT INTO VATTU VALUES('VT03',N'GẠCH ỐNG',N'VIÊN',120,800000)
INSERT INTO VATTU VALUES('VT04',N'GẠCH THẺ',N'VIÊN',110,800000)
INSERT INTO VATTU VALUES('VT05',N'ĐÁ LỚN',N'KHỐI',25000,100000)
INSERT INTO VATTU VALUES('VT06',N'ĐÁ NHỎ',N'KHỐI',33000,100000)
INSERT INTO VATTU VALUES('VT07',N'LAM GIO',N'CÁI',15000,5000)

INSERT INTO KHACHHANG VALUES('KH01',N'NGUYỄN THỊ BÉ',N'TÂN BÌNH','8457895',N'bnt@yahoo.com')
INSERT INTO KHACHHANG VALUES('KH02',N'LÊ HOÀNG NAM',N'BÌNH CHÁNH','9878987',N'namlehoang@abc.com.vn')
INSERT INTO KHACHHANG VALUES('KH03',N'TRẦN THỊ CHIÊU',N'TÂN BÌNH','8457895',NULL)
INSERT INTO KHACHHANG VALUES('KH04',N'MAI THỊ QUẾ ANH',N'BÌNH CHÁNH',NULL,NULL)
INSERT INTO KHACHHANG VALUES('KH05',N'LÊ VĂN SANG',N'QUẬN 10',NULL,N'sanglv@hcm.vnn.vn')
INSERT INTO KHACHHANG VALUES('KH06',N'TRẦN HOÀNG KHẢI',N'TÂN BÌNH','8457897',NULL)

INSERT INTO HOADON (MAHD,NGAY,MAKH) VALUES ('HD001',CONVERT(DATETIME,'12/05/2015',103),'KH01')
INSERT INTO HOADON (MAHD,NGAY,MAKH) VALUES ('HD002',CONVERT(DATETIME,'25/05/2015',103),'KH02')
INSERT INTO HOADON (MAHD,NGAY,MAKH) VALUES ('HD003',CONVERT(DATETIME,'25/05/2015',103),'KH01')
INSERT INTO HOADON (MAHD,NGAY,MAKH) VALUES ('HD004',CONVERT(DATETIME,'25/05/2015',103),'KH04')
INSERT INTO HOADON (MAHD,NGAY,MAKH) VALUES ('HD005',CONVERT(DATETIME,'26/05/2015',103),'KH04')
INSERT INTO HOADON (MAHD,NGAY,MAKH) VALUES ('HD006',CONVERT(DATETIME,'02/06/2015',103),'KH03')
INSERT INTO HOADON (MAHD,NGAY,MAKH) VALUES ('HD007',CONVERT(DATETIME,'22/06/2015',103),'KH04')
INSERT INTO HOADON (MAHD,NGAY,MAKH) VALUES ('HD008',CONVERT(DATETIME,'25/06/2015',103),'KH03')
INSERT INTO HOADON (MAHD,NGAY,MAKH) VALUES ('HD009',CONVERT(DATETIME,'15/08/2015',103),'KH04')
INSERT INTO HOADON (MAHD,NGAY,MAKH) VALUES ('HD010',CONVERT(DATETIME,'30/09/2015',103),'KH01')
INSERT INTO HOADON (MAHD,NGAY,MAKH) VALUES ('HD011',CONVERT(DATETIME,'27/12/2015',103),'KH06')
INSERT INTO HOADON (MAHD,NGAY,MAKH) VALUES ('HD012',CONVERT(DATETIME,'27/12/2015',103),'KH01')

INSERT INTO CHITIETHOADON(MAHD,MAVT,SL,GIABAN) VALUES ('HD001','VT01',5,52000)
INSERT INTO CHITIETHOADON(MAHD,MAVT,SL,GIABAN) VALUES ('HD001','VT05',10,30000)
INSERT INTO CHITIETHOADON(MAHD,MAVT,SL,GIABAN) VALUES ('HD002','VT03',10000,150)
INSERT INTO CHITIETHOADON(MAHD,MAVT,SL,GIABAN) VALUES ('HD003','VT02',20,55000)
INSERT INTO CHITIETHOADON(MAHD,MAVT,SL,GIABAN) VALUES ('HD004','VT03',50000,150)
INSERT INTO CHITIETHOADON(MAHD,MAVT,SL,GIABAN) VALUES ('HD004','VT04',20000,120)
INSERT INTO CHITIETHOADON(MAHD,MAVT,SL,GIABAN) VALUES ('HD005','VT05',10,30000)
INSERT INTO CHITIETHOADON(MAHD,MAVT,SL,GIABAN) VALUES ('HD005','VT06',15,35000)
INSERT INTO CHITIETHOADON(MAHD,MAVT,SL,GIABAN) VALUES ('HD005','VT07',20,17000)
INSERT INTO CHITIETHOADON(MAHD,MAVT,SL,GIABAN) VALUES ('HD006','VT04',10000,120)
INSERT INTO CHITIETHOADON(MAHD,MAVT,SL,GIABAN) VALUES ('HD007','VT04',20000,125)
INSERT INTO CHITIETHOADON(MAHD,MAVT,SL,GIABAN) VALUES ('HD008','VT01',100,55000)
INSERT INTO CHITIETHOADON(MAHD,MAVT,SL,GIABAN) VALUES ('HD008','VT02',20,47000)
INSERT INTO CHITIETHOADON(MAHD,MAVT,SL,GIABAN) VALUES ('HD009','VT02',25,48000)
INSERT INTO CHITIETHOADON(MAHD,MAVT,SL,GIABAN) VALUES ('HD010','VT01',25,57000)
INSERT INTO CHITIETHOADON(MAHD,MAVT,SL,GIABAN) VALUES ('HD011','VT01',20,55000)
INSERT INTO CHITIETHOADON(MAHD,MAVT,SL,GIABAN) VALUES ('HD011','VT02',20,45000)
INSERT INTO CHITIETHOADON(MAHD,MAVT,SL,GIABAN) VALUES ('HD012','VT01',20,55000)
INSERT INTO CHITIETHOADON(MAHD,MAVT,SL,GIABAN) VALUES ('HD012','VT02',10,48000)
INSERT INTO CHITIETHOADON(MAHD,MAVT,SL,GIABAN) VALUES ('HD012','VT03',10000,150)
